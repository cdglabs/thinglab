'Dans refactoring of compRect for easy change to selection'TextImage understands: 'compRect: r  	["Reverse the rectangle r from white to black, as part of a selection"	((r intersect: frame) intersect: window) comp	]' classified: 'selecting'TextImage understands: 'complementfrom: t1 to: t2 | t3 mid	["Reverse the selection from black-on-white to white-on-black"	"t1 and t2 are character blocks for beginning and end of the selection"	t1 minY = t2 minY  		["selection is all on one line - easy."		self compRect: ([t1 minX  t2 minX  [t1 origin rect: t2 corner]									t2 origin rect: t1 corner])]	[t1 minY > t2 minY 		["ensure t1 is at lesser y"		t3 _ t1.  t1 _ t2.  t2 _ t3]].	"compute the middle block of full lines"	mid _ frame minX  t1 maxY rect: frame maxX  t2 minY.	"top partial line"	self compRect: (t1 origin rect: mid maxX  mid minY).	"middle block of full lines"	self compRect: mid.	"bottom partial line"	self compRect: (mid minX  mid maxY rect: t2 corner)]' classified: 'selecting'